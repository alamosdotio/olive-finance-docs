# How Pool Works

## Liquidity Pool

The Jupiter Perpetuals exchange is a trader-to-LP exchange, which means traders borrow tokens from the liquidity pool (the JLP pool) for leverage.
Instead of periodic funding payments between long and short traders, Jupiter Perpetuals implements an hourly borrow fee mechanism. Traders pay these
fees to the pool based on the amount of tokens they've borrowed. This mechanism helps secure the balance of the pool's assets and compensates liquidity
providers for the use of their tokens.

## Add/Remove Liquidity

When a user adds liquidity to the JLP pool, they increase the amount of TVL
(Total Value Locked) which increases the liquidity available for perps trading. 
The pool is currently a collection of the following tokens: **USDC, USDT, SOL, wBTC and ETH**.

Adding Liquidity

Any Liquidity providers (LPs) can acquire JLP by swapping for it on Jupiter
Swap. Jupiter Swap will find the best price to acquire JLP for you automatically. 
This can either be purchasing it off the open market or swapping it for a desired 
asset and depositing that into JLP directly. Use Jupiter Swap for a frictionless 
experience of getting JLP. While JLP is still being minted, your assets may be deposited
into the relevant token pool, increasing the current weightage. At the point of depositing
assets into the JLP pool, the protocol will re-price the TVL in USD value.

Removing Liquidity

JLP can also be sold via Jupiter Swap. Simply swap JLP for your desired asset. 
The JLP token could either be transferred to another trader or may be redeemed
by the JLP pool, burning the JLP token, and releasing some of the currency contained in the pool.

Purchasing/Exiting JLP

The best way to purchase or exit JLP is via [Jupiter Swap.](https://web.archive.org/web/20250310172707/https:/jup.ag/swap/USDC-JLP)
When using Jupiter Swap or programs that integrate Jupiter Swap, the minting and burning of JLP tokens occur automatically. 
When you swap in and out of JLP, Jupiter Swap will find the best route to mint/burn JLP automatically, or swap through other DEXes if the route offered is better.

## Yield generation
The exchange generates fees and yields in various ways:

75% of the fees generated by JLP go into the pool. The fees are compounded into the pool hourly.

## Estimated yield

To provide an estimated perspective, you can calculate potential revenue by taking the Jupiter Perpetual Exchange's daily or weekly total volume and multiplying it by a fee percentage. 
For instance:
Total Daily Volume: 50 million Fee Percentage: 0.06%
Price Impact Fees: Minimum 0.01% Revenue Share Percentage: 75%
Using these values (excluding price impact and hourly borrow fees), the estimated calculation would be as follows:
Total estimated revenue to be deposited into the JLP pool:

$50M x 0.06% x 75% = $22,500

To determine your specific share or weight in the total JLP pool, use the following formula:

your_pool_contributed_amount / total_pool_amount x 100 =

your_pool_contributed_amount / total_pool_amount x 100 =


For example:
Your contribution: $1,000
Total pool amount: $4,000,000
Your share percentage: 1,000 / 4,000,000 x 100 = 0.025%

Finally, you can calculate your estimated generated revenue share by multiplying the results of the first and second calculations:
estimated revenue share you generate = $22,500 x 0.025% = $5.625


## Fee distribution and APY calculation

### Fee Distribution

**1) Hourly Fee Distribution**

Fee distribution into the JLP token occurs at the start of every hour, in UTC (e.g. 00:00 UTC, 01:00 UTC, 02:00 UTC and so on).

During this process, 75% of realised fees are withdrawn from each custody account's assets, fees_reserves and deposited back into the pool, while the remaining 25% is sent to Jupiter as a protocol fee.

1. Weekly APR Updates

The JLP pool maintains a pool_apr.last_updated field, which records a UNIX timestamp of the latest APR update. After a **consecutive week** of hourly fee distributions has passed, Jupiter calculates the new APR and updates the

pool_apr.fee_apr_bps value accordingly.

**APR Calculation**

APR for the JLP pool is updated weekly and can be calculated using the following formula:

if current_time > (last_updated_time + 1_WEEK):     time_diff = current_time - last_updated_time
// 10_000 represents the scaling factor used to calculate the BPS for the pool's APR,     apr_bps = (realized_fee_usd * YEAR_IN_SECONDS * 10_000) /
(pool_amount_usd * time_diff)

## Risks

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor 
incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud 
exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.

## Pool weightage

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor 
incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud 
exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.

## Maintaining target weight

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor 
incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud 
exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.

## Failsafe mechanism

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor 
incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud 
exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
